var infusionActions = {
  'gradepotentialtutoringslocounty.com': 'https://zcu92250.infusionsoft.com/app/form/process/0778eea6b1fc774affd4aa5d56e81c28',
  'tutoringsantabarbaraarea.com': 'https://zcu92250.infusionsoft.com/app/form/process/6b4f96f0f3c3f35d8a884cb25b1defbd',
  'tutoringventuracounty.com': 'https://zcu92250.infusionsoft.com/app/form/process/2dcd474ccda47149d3469826d2851c58',
  'gradepotentialtutoringsandiego.com': 'https://zcu92250.infusionsoft.com/app/form/process/a6162ac29f92252f8c8fdc67f47b7997',
  'gradepotentialtutoringoc.com': 'https://zcu92250.infusionsoft.com/app/form/process/a4f8da8470a83cdd65f63139f3585ca3',
  'tutoringsanfernandovalley.com': 'https://zcu92250.infusionsoft.com/app/form/process/92fa0256460fd61581f836bbfda26b65',
  'tutoringsangabrielvalley.com': 'https://zcu92250.infusionsoft.com/app/form/process/260631a137d189c927601e7b59feebcc',
  'tutoringlongbeacharea.com': 'https://zcu92250.infusionsoft.com/app/form/process/d6a76088bd4793069a7c8e6b9ce352c6',
  'losangelestutoringservice.com': 'https://zcu92250.infusionsoft.com/app/form/process/b584e83c34505d83bd6d877e66c4508d',
  'tutoringinlandempire.com': 'https://zcu92250.infusionsoft.com/app/form/process/69169f8188036abe3e14818d3d9e7f50',
  'tutoringeastbayarea.com': 'https://zcu92250.infusionsoft.com/app/form/process/031e120b1229664d51461810e79762d6',
  'tutoringsouthbayarea.com': 'https://zcu92250.infusionsoft.com/app/form/process/bb51ae0c0f8fcaf9128f3736b5bbe15a',
  'tutoringpeninsula.com': 'https://zcu92250.infusionsoft.com/app/form/process/4c8a106217afc93842d75f8eda9cae76',
  'sanfranciscotutoringservice.com': 'https://zcu92250.infusionsoft.com/app/form/process/3ac7add41176bf5768cde2bbbdb54f2d',
  'gradepotentialtutoringsacmetro.com': 'https://zcu92250.infusionsoft.com/app/form/process/3ec0c16bfd5cfe1c6bd871c8b290f25e',
  'tutoringseattlemetroarea.com': 'https://zcu92250.infusionsoft.com/app/form/process/99fd61701f2f4c471f8cb75fe7f227a2',
  'tutoringportlandmetroarea.com': 'https://zcu92250.infusionsoft.com/app/form/process/c23da7e66a456509af458e66e46f0ffd',
  'tutoringvegasmetroarea.com': 'https://zcu92250.infusionsoft.com/app/form/process/a01083fe73c9a230a66adbde2ccc9179',
  'tutoringphoenixmetroarea.com': 'https://zcu92250.infusionsoft.com/app/form/process/48f65a610ed828e3c13833169773b92a',
  'tutoringtucsonmetroarea.com': 'https://zcu92250.infusionsoft.com/app/form/process/1466de1f32410c72c00b89e9e55a8b2b'
};
var infusionAction = infusionActions[document.location.hostname.toLowerCase()];
if (infusionAction){
  document.getElementById('InfoForm').action = infusionAction;
  document.getElementById('modalForm').action = infusionAction;
}

var arr = [
['(636) 398-8867', 'rTapNumber166398'],
['(816) 348-8867', 'rTapNumber166389'],
['(281) 238-8867', 'rTapNumber166379'],
['(281) 713-4898', 'rTapNumber166379'],
['(281) 713-5412', 'rTapNumber166379'],
['(210) 558-8867', 'rTapNumber166383'],
['(210) 904-8161', 'rTapNumber166383'],
['(512) 458-8867', 'rTapNumber166387'],
['(512) 222-5750', 'rTapNumber166387'],
['(512) 200-7617', 'rTapNumber166387'],
['(512) 649-7575', 'rTapNumber166387'],
['(651) 578-8867', 'rTapNumber166397'],
['(830) 778-8867', 'rTapNumber166388'],
['(314) 878-8867', 'rTapNumber166386'],
['(817) 488-8867', 'rTapNumber166382'],
['(763) 788-8867', 'rTapNumber166391'],
['(713) 228-8867', 'rTapNumber166380'],
['(888) 749-3532', 'rTapNumber167592'],
['(612) 338-8867', 'rTapNumber166396'],
['(913) 498-8867', 'rTapNumber166385'],
['(952) 448-8867', 'rTapNumber166390'],
['(972) 488-8867', 'rTapNumber166384'],
['(214) 328-8867', 'rTapNumber170574'],
['(214) 295-9343', 'rTapNumber170574'],
['(214) 390-9099', 'rTapNumber170574'],
['(817) 527-8844', 'rTapNumber166382'],
['(817) 369-8173', 'rTapNumber166382'],
['(305) 448-8867', 'rTapNumber225988'],
['(954) 838-8867', 'rTapNumber225998'],
['(561) 278-8867', 'rTapNumber225999'],
['(404) 248-8867', 'rTapNumber226152'],
['(770) 458-8867', 'rTapNumber226147'],
['(301) 568-8867', 'rTapNumber226148'],
['(202) 408-8867', 'rTapNumber226149'],
['(703) 208-8867', 'rTapNumber226151'],
['(215) 338-8867', 'rTapNumber226153'],
['(610) 828-8867', 'rTapNumber226154'],
['(760) 788-8867', 'rTapNumber226725'],
['(760) 260-3229', 'rTapNumber226725'],
['(760) 206-8288', 'rTapNumber226725'],
['(760) 257-5509', 'rTapNumber226725'],
['(760) 260-9145', 'rTapNumber226725'],
['(760) 203-5406', 'rTapNumber226725'],
['(760) 205-3413', 'rTapNumber226725'],
['(303) 338-8867', 'rTapNumber226723'],
['(720) 858-8867', 'rTapNumber226724'],
['(858) 578-8867', 'rTapNumber39661', '6522'],
['(619) 363-7261', 'rTapNumber39660', '6522'],
['(619) 363-5927', 'rTapNumber39660', '6522'],
['(619) 492-9412', 'rTapNumber39660', '6522'],
['(619) 578-8867', 'rTapNumber39660', '6522'],
['(858) 264-5969', 'rTapNumber39661', '6522'],
['(858) 345-6597', 'rTapNumber39661', '6522'],
['(858) 256-4818', 'rTapNumber39661', '6522'],
['(206) 448-8867', 'rTapNumber41700', '7159'],
['(253) 548-8867', 'rTapNumber41701', '7159'],
['(425) 778-8867', 'rTapNumber41702', '7159'],
['(360) 658-8867', 'rTapNumber41699', '7159'],
['(253) 313-1886', 'rTapNumber41701', '7159'],
['(425) 689-5285', 'rTapNumber41702', '7159'],
['(360) 216-0401', 'rTapNumber41699', '7159'],
['(425) 689-5279', 'rTapNumber41702', '7159'],
['(253) 313-1888', 'rTapNumber41701', '7159'],
['(253) 313-1879', 'rTapNumber41701', '7159'],
['(425) 689-5323', 'rTapNumber41702', '7159'],
['(253) 313-1895', 'rTapNumber41701', '7159'],
['(360) 216-0357', 'rTapNumber41699', '7159'],
['(360) 216-0410', 'rTapNumber41699', '7159'],
['(425) 689-5299', 'rTapNumber41702', '7159'],
['(425) 689-5301', 'rTapNumber41702', '7159'],
['(425) 689-5303', 'rTapNumber41702', '7159'],
['(253) 313-1890', 'rTapNumber41701', '7159'],
['(602) 788-8867', 'rTapNumber41649', '7133'],
['(623) 878-8867', 'rTapNumber41648', '7133'],
['(480) 998-8867', 'rTapNumber41647', '7133'],
['(530) 528-8867', 'rTapNumber41641', '7132'],
['(916) 448-8867', 'rTapNumber41642', '7132'],
['(949) 248-8867', 'rTapNumber41713', '7167'],
['(714) 558-8867', 'rTapNumber41712', '7167'],
['(909) 338-8867', 'rTapNumber37908', '6091'],
['(951) 678-8867', 'rTapNumber37909', '6091'],
['(702) 658-8867', 'rTapNumber37877', '6082'],
['(805) 968-8867', 'rTapNumber41754', '7197'],
['(503) 238-8867', 'rTapNumber41697', '7158'],
['(360) 988-8867', 'rTapNumber41698', '7158'],
['(520) 458-8867', 'rTapNumber41744', '7191'],
['(408) 448-8867', 'rTapNumber41695', '7156'],
['(925) 458-8867', 'rTapNumber41706', '7162'],
['(510) 758-8867', 'rTapNumber41705', '7162'],
['(650) 968-8867', 'rTapNumber41708', '7164'],
['(415) 788-8867', 'rTapNumber41707', '7163'],
['(805) 548-8867', 'rTapNumber41750', '7194'],
['(626) 338-8867', 'rTapNumber41639', '7130'],
['(909) 988-8867', 'rTapNumber41638', '7130'],
['(818) 358-8867', 'rTapNumber41640', '7131'],
['(562) 438-8867', 'rTapNumber41709', '7165'],
['(310) 338-8867', 'rTapNumber41711', '7166'],
['(323) 568-8867', 'rTapNumber41710', '7166']
]

var cookie = {
  set: function (cname,cvalue,exdays){
    var d = new Date();
    d.setTime(d.getTime()+(exdays*24*60*60*1000));
    var expires = "expires="+d.toGMTString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
  },
  get: function(name){
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
      var c = ca[i].trim();
      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
  }
}

function makePhoneRegExp(phone){
  return new RegExp(phone.replace('(', '\\(').replace(')', '\\)').replace(' ', '\\s'));
}

jQuery.expr[':'].hasText = function(element, index){
  if (element.childNodes.length == 1 && element.firstChild.nodeType == 3){
    return jQuery.trim(element.innerHTML).length > 0;
  }
  return false;
}
var adiInit = "19056"
var selector = arr.map(function (e){return ':contains("' + e[0].substr(8, 6) + '"):hasText'}).join(', ');
jQuery(selector).each(function (i, e){
  var nums = arr.filter(function (a){return e.textContent.match(makePhoneRegExp(a[0])) && e.textContent.match(makePhoneRegExp(a[0])).length > 0})
  nums.forEach(function (num){
    e.innerHTML = e.innerHTML.replace(makePhoneRegExp(num[0]), '<span class="' + num[1] + '">' + num[0] + '</span>');
    if (num[2]){
      adiInit = num[2];
    }
  });
});

var adiRVO = true;
var adiFunc = null;
(function() {
  var adiSrc = document.createElement("script"); adiSrc.type = "text/javascript";
  adiSrc.async = true;
  adiSrc.src = ("https:" == document.location.protocol ? "https://static-ssl" : "http://static-cdn")
  + ".responsetap.com/static/scripts/rTapTrack.min.js";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(adiSrc, s);
})();

function rTapPostReplacement(){
  if (cookie.get('adiV')){
    jQuery.ajax({
      url: 'https://data.gradepotential.com/api/rTap/polling/' + cookie.get('adiV'),
      success: function (data){
        console.log('Called!!!', data);
        window.uetq = window.uetq || [];
        window.uetq.push({ 'ec':'phone call', 'ea':'phone call', 'el':'phone call', 'ev': 1 });
      },
      timeout: 10*60*1000
    });
    jQuery('[class^=rTapNumber]').bind('touchstart', function(){
      window.uetq = window.uetq || [];
      window.uetq.push({ 'ec':'phone call', 'ea':'phone call', 'el':'phone call', 'ev': 1 });
      jQuery.ajax({
        url: 'https://data.gradepotential.com/api/rTap/touchstart/' + cookie.get('adiV'),
        success: function(data){console.log(data)}
      });
    });
    if (jQuery('.wpcf7-form').length) {
      jQuery('.wpcf7-form')[0].rtap_ID.value = cookie.get('adiV');
      jQuery('.wpcf7-form')[1].rtap_ID.value = cookie.get('adiV');
    }
    ga('set', {
      'dimension1':  cookie.get('geo_page'),
      'dimension2':  cookie.get('adiV')
    });
    ga('send', 'pageview');
  }
}
